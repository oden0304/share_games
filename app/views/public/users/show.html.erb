<div class="container border">
  <table class="m-5">
    <% if @user.profile_image.attached? %>
      <tr>
        <th><%= image_tag @user.profile_image, class: "rounded-circle", size: "200x200" %></th>
        <th><h2 class="ml-5"><b><%= @user.name %></b></h2></th>
      </tr>
    <% else %>
      <tr>
        <th><%= image_tag 'no_image', class: "rounded-circle", size: "200x200" %></th>
        <th><h2 class="ml-5"><b><%= @user.name %></b></h2></th>
      </tr>
    <% end %>
    <tr>
      <th id='follow-btn_#{ user.id }'>
        <%= render "public/relationships/follow_btn", user: @user %>
      </th>
      <th></th>
    </tr>
    <tr>
      <th>フォロー:</th>
      <th id='following-count_#{ user.id }'>
        <%= link_to "#{ @user.followings.count }", public_user_followings_path(@user), remote: true %>
      </th>
    </tr>
    <tr>
      <th>フォロワー:</th>
      <th id='following-count_#{ user.id }'>
        <%= link_to "#{ @user.followers.count }", public_user_followers_path(@user), remote: true %>
      </th>
    </tr>
    <tr>
      <th>introduction:</th>
      <th><%= @user.introduction %></th>
    </tr>
  </table>
  <ul class="nav nav-tabs nav-fill">
    <li class="nav-item">
      <a class="nav-link active" data-toggle="tab" href="#tab-post">過去の投稿</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#tab-favorite">いいね一覧</a>
    </li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active mt-5" id="tab-post">
      <% @posts.each do |post| %>
        <%= link_to public_post_path(post), class: "post-link" do %>
          <table class="mt-2 ml-5">
            <% if post.user.profile_image.attached? %>
              <tr>
                <th><%= image_tag post.user.profile_image, class: "rounded-circle", size: "80x80" %></th>
                <th><h4><b><%= post.user.name %></b></h4></th>
              </tr>
            <% else %>
              <tr>
                <th class="pr-3"><%= image_tag 'no_image', class: "rounded-circle", size: "80x80" %></th>
                <th><h4><b><%= post.user.name %></h4></b></th>
              </tr>
            <% end %>
          </table>
          <table>
            <tr>
              <th width="120"></th>
              <th class="p-5 text"><%= safe_join(post.text.split("\n"),tag(:br)) %></th>
            </tr>
          </table>
          <div class="border-bottom border-dark w-100 text-right p-3" id="favorite_btn_<%= @post.id %>">
            <b><%= render 'public/posts/favorite', post: @post %></b>
          </div>
        <% end %>
      <% end %>
    </div>
    <div class="tab-pane" id="tab-favorite">
      <% @favorite_posts.each do |post|%>
        <%= link_to public_post_path(post), class: "post-link" do %>
          <table class="mt-2 ml-5">
            <% if post.user.profile_image.attached? %>
              <tr>
                <th><%= image_tag post.user.profile_image, class: "rounded-circle", size: "80x80" %></th>
                <th><h4><b><%= post.user.name %></b></h4></th>
              </tr>
            <% else %>
              <tr>
                <th class="pr-3"><%= image_tag 'no_image', class: "rounded-circle", size: "80x80" %></th>
                <th><h4><b><%= post.user.name %></h4></b></th>
              </tr>
            <% end %>
          </table>
          <table>
            <tr>
              <th width="120"></th>
              <th class="p-5 text"><%= safe_join(post.text.split("\n"),tag(:br)) %></th>
            </tr>
          </table>
          <div class="border-bottom border-dark w-100 text-right p-3" id="favorite_btn_<%= @post.id %>">
            <b><%= render 'public/posts/favorite', post: @post %></b>
          </div>
        <% end %>
      <% end %>
    </div>
  </duv>
</div>